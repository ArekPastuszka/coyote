{% extends 'job.base' %}

{%- block title -%}
    Praca

    {% if firm %}
        w firmie {{ firm }}
    {% endif %}

    {% if request('q') %}
        {{ request('q') }}
    {% endif %}

    {% if input.tags %}
        {{ input.tags|join(', ') }}
    {% endif %}

    {% if input.cities %}
        {{ input.cities|join(', ') }}
    {% endif %}

    {{ parent() }}
{%- endblock -%}
{% block description %}Praca dla programistów. Pracodawco: umieść u nas swoją ofertę pracy - już od 0,75 zł za dzień. Znajdź u nas pracownika wśród 50 000 programistów.{% endblock %}
{% block keywords %}programowanie, praca, C#, Java, programista, HTML, CSS, webdesign, JavaScript, jQuery, C, C++, webmastering{% endblock %}

{% import 'components.widgets' as widgets %}

{% block container %}
    <div id="page-job" class="row">
        <div class="col-md-9">

            <div class="panel panel-default search-form margin-md-top">
                <div class="panel-body">
                    <div class="row">
                        <div class="form-group col-sm-4">
                            <i class="fa fa-fw fa-map-marker"></i>

                            <input type="search" class="form-control" placeholder="Nazwa miejscowości">
                        </div>

                        <div class="form-group col-sm-6">
                            <i class="fa fa-fw fa-search"></i>

                            <input type="search" class="form-control" placeholder="Szukaj po tytule, nazwie firmy">
                        </div>

                        <div class="form-group col-sm-2 col-xs-1">
                            <button class="btn btn-primary btn-search" type="submit">
                                <i class="fa fa-search"></i> <span class="hidden-xs">Szukaj</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="panel-footer">
                    <ul  class="nav nav-pills">
                        <li role="presentation" class="active"><a href="#tech" role="tab" data-toggle="tab">Technologia</a></li>
                        <li role="presentation"><a href="#compensation" role="tab" data-toggle="tab">Wynagrodzenie</a></li>
                    </ul>

                    <div class="tab-content">
                        <div id="tech" class="tab-pane active filters">
                            <ul class="list-group list-group-tech">
                                <li v-for="tag in tags" :key="tag.id" class="list-group-item">
                                    <input type="hidden" name="tag[]" :value="tag.name" :checked="input.tags.indexOf(tag.name) > -1">

                                    <a @click.prevent="toggleTag(tag)" :href="tag.url">
                                        <img :alt="tag.name" :src="tag.logo" :class="{'grayscale': input.tags.length && input.tags.indexOf(tag.name) === -1}">

                                        ${ tag.real_name ? tag.real_name : tag.name }
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div id="compensation" class="tab-pane filters">

                        </div>

                    </div>
                </div>
            </div>

            <div class="row margin-md-bottom">
                <div class="col-xs-12">
                    <div class="pull-right">
                        Sortuj według

                        <select v-model="sort" name="sort" class="form-control input-inline input-sm margin-sm-left" style="width: auto">
                            <option value="boost_at">Data dodania</option>
                            <option value="_score">Trafność</option>
                            <option value="salary">Wynagrodzenie</option>
                        </select>
                    </div>

                    <div class="clearfix"></div>
                </div>
            </div>

            <vue-job v-for="job in jobs.data" :job="job" :key="job.id"></vue-job>

            <vue-pagination :current-page="jobs.meta.current_page" :total-pages="jobs.meta.last_page" @change="changePage"></vue-pagination>
        </div>

        <div class="col-md-3">
            <section id="post-offer">
                <h4>Dla pracodawców</h4>

                <span class="edge">
                    <a href="{{ route('job.submit') }}?revalidate=1" class="btn btn-primary">Dodaj ofertę pracy</a>
                </span>

                <p><a href="{{ route('job.business') }}">Już od 30 zł / 40 dni!</a></p>
            </section>
        </div>
    </div>
{% endblock %}

{% block body %}
    {{ parent() }}

    {{ widgets.vue() }}

    <script type="text/javascript">
        var data = {
            jobs: {{ jobs|raw }},
            tags: {{ tags|json_encode|raw }},
            input: {{ input|json_encode|raw }},
            sort: '{{ sort }}'
        }
    </script>
{% endblock %}

{% block fixed %}

    {{ parent() }}

    <div id="clients" class="hidden-sm hidden-xs">
        <div class="row max-width">
            <div class="col-xs-12">
                <h4>Z naszych usług korzystali...</h4>

                <div class="row">
                    <div class="col-sm-2 col-xs-4">
                        <img src="{{ cdn('img/logo/wp.png') }}" class="img-responsive">
                    </div>

                    <div class="col-sm-2 col-xs-4">
                        <img src="{{ cdn('img/logo/gazeta.png') }}" class="img-responsive">
                    </div>

                    <div class="col-sm-2 col-xs-4">
                        <img src="{{ cdn('img/logo/allegro.png') }}" class="img-responsive">
                    </div>

                    <div class="col-sm-2 col-xs-4">
                        <img src="{{ cdn('img/logo/nsn.png') }}" class="img-responsive" style="height: 25px">
                    </div>

                    <div class="col-sm-2 col-xs-4">
                        <img src="{{ cdn('img/logo/pgs-software.png') }}" class="img-responsive">
                    </div>

                    <div class="col-sm-2 col-xs-4">
                        <img src="{{ cdn('img/logo/microsoft.png') }}" class="img-responsive" style="height: 25px">
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
