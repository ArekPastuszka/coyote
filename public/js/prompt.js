!function(e){e.fn.prompt=function(t){return this.each(function(){var n=e(this),a=-1,r=0,i=e('<ul style="display: none;" class="auto-complete"></ul>'),o=function(){if(n[0].selectionStart||0==n[0].selectionStart)return n[0].selectionStart;if(document.selection){n.focus();var e=document.selection.createRange();return e.moveStart("character",-n.value.length),e.text.length}},l=function(e){for(var t=e,a=-1;t>e-50&&t>=0;){var r=n.val()[t];if(" "===r)break;if("@"===r&&(0===t||" "===n.val()[t-1]||"\n"===n.val()[t-1])){a=t+1;break}t--}return a},c=function(t){var n=e("li",i).length;n>0&&(t>=n?t=0:0>t&&(t=n-1),a=t,e("li",i).removeClass("hover"),e("li:eq("+a+")",i).addClass("hover"))};n.bind("keyup click",function(s){var u="",h=s.keyCode,v=o(),f=l(v);f>-1&&(u=n.val().substr(f,v-f));var d=function(){var t=e("li.hover",i).text();if(t.length){(t.indexOf(" ")>-1||t.indexOf(".")>-1)&&(t="{"+t+"}"),n.val(n.val().substr(0,f)+t+n.val().substring(v)).trigger("change").focus();var a=f+t.length;if(n[0].setSelectionRange)n[0].setSelectionRange(a,a);else if(n[0].createTextRange){var r=n[0].createTextRange();r.collapse(!0),r.moveEnd("character",a),r.moveStart("character",a),r.select()}}i.html("").hide()};switch(h){case 27:i.html("").hide();break;case 40:c(a+1);break;case 38:c(a-1);break;case 13:d();break;default:u.length>=2?(clearTimeout(r),r=setTimeout(function(){e.get(t,{q:u},function(t){i.html(t).hide();var r=e("li",i).length;if(r>0){var o=n.offset();e("li",i).click(d).hover(function(){e("li",i).removeClass("hover"),e(this).addClass("hover")},function(){e(this).removeClass("hover")}),i.css({width:n.outerWidth(),top:n.outerHeight()+o.top+1,left:o.left}).show(),a=-1}})},200)):i.html("").hide()}}).keydown(function(e){var t=e.keyCode;return 40!==t&&38!==t&&13!==t&&27!==t||!i.is(":visible")?void 0:(e.preventDefault(),!1)}),i.appendTo(document.body),e(document).bind("click",function(t){var n=e(t.target);n.not(i)&&i.html("").hide()})})}}(jQuery);
//# sourceMappingURL=prompt.js.map