var app=angular.module("Microblog",["ngRoute"]);app.config(["$interpolateProvider",function(e){e.startSymbol("[["),e.endSymbol("]]")}]),app.controller("PostController",["$scope","$http",function(e,t){e.form={},e.submit=function(){console.log($.param(e.form)),t({method:"POST",url:e.url,data:$.param(e.form),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){console.log(e)})}}]),function(e){e.fn.prompt=function(t){return this.each(function(){var n=e(this),i=-1,o=0,r=e('<ul style="display: none;" class="auto-complete"></ul>'),a=function(){if(n[0].selectionStart||0==n[0].selectionStart)return n[0].selectionStart;if(document.selection){n.focus();var e=document.selection.createRange();return e.moveStart("character",-n.value.length),e.text.length}},c=function(e){for(var t=e,i=-1;t>e-50&&t>=0;){var o=n.val()[t];if(" "===o)break;if("@"===o&&(0===t||" "===n.val()[t-1]||"\n"===n.val()[t-1])){i=t+1;break}t--}return i},s=function(t){var n=e("li",r).length;n>0&&(t>=n?t=0:0>t&&(t=n-1),i=t,e("li",r).removeClass("hover"),e("li:eq("+i+")",r).addClass("hover"))};n.bind("keyup click",function(l){var u="",h=l.keyCode,f=a(),d=c(f);d>-1&&(u=n.val().substr(d,f-d));var p=function(){var t=e("li.hover span",r).text();if(t.length){(t.indexOf(" ")>-1||t.indexOf(".")>-1)&&(t="{"+t+"}"),n.val(n.val().substr(0,d)+t+n.val().substring(f)).trigger("change").focus();var i=d+t.length;if(n[0].setSelectionRange)n[0].setSelectionRange(i,i);else if(n[0].createTextRange){var o=n[0].createTextRange();o.collapse(!0),o.moveEnd("character",i),o.moveStart("character",i),o.select()}}r.html("").hide()};switch(h){case 27:r.html("").hide();break;case 40:s(i+1);break;case 38:s(i-1);break;case 13:p();break;default:u.length>=2?(clearTimeout(o),o=setTimeout(function(){e.get(t,{q:u},function(t){r.html(t).hide();var o=e("li",r).length;if(o>0){var a=n.offset();e("li",r).click(p).hover(function(){e("li",r).removeClass("hover"),e(this).addClass("hover")},function(){e(this).removeClass("hover")}),r.css({width:n.outerWidth(),top:n.outerHeight()+a.top+1,left:a.left}).show(),i=-1}})},200)):r.html("").hide()}}).keydown(function(e){var t=e.keyCode;return 40!==t&&38!==t&&13!==t&&27!==t||!r.is(":visible")?void 0:(e.preventDefault(),!1)}),r.appendTo(document.body),e(document).bind("click",function(t){var n=e(t.target);n.not(r)&&r.html("").hide()})})}}(jQuery),function(e){"use strict";e.fn.autogrow=function(){return this.each(function(){var t=e(this),n=t.height(),i=300,o=(t.css("lineHeight"),0),r=0,a=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e(this).width()-parseInt(t.css("paddingLeft"))-parseInt(t.css("paddingRight")),fontSize:t.css("fontSize"),fontFamily:t.css("fontFamily"),lineHeight:t.css("lineHeight"),resize:"none"}).appendTo(document.body),c=function(){var t=function(e,t){for(var n=0,i="";t>n;n++)i+=e;return i},o=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return t("&nbsp;",e.length-1)+" "});a.html(o),e(this).css("height",Math.max(Math.min(a.height()+17,i),n))};t.change(c).keyup(c).keydown(c),c.apply(this),t.mousedown(function(){o=t.width(),r=t.height()}).mouseup(function(){(t.width()!=o||t.height()!=r)&&t.unbind("keyup",c).unbind("keydown",c).unbind("change",c),o=r=0})})}}(jQuery),function(e){"use strict";e.fn.fastSubmit=function(){return this.each(function(){e(this).keydown(function(t){if(13===t.keyCode){var n=e(this).closest("form");t.ctrlKey&&n.submit()}})})}}(jQuery);
//# sourceMappingURL=microblog.js.map